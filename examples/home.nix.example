# Example Home Manager configuration (home.nix)
# Generated by the NixOS Hyprland setup script

{ config, pkgs, ... }:

{
  home.username = "martin";
  home.homeDirectory = "/home/martin";
  home.stateVersion = "24.11";

  # Packages managed by Home Manager
  home.packages = with pkgs; [
    # Hyprland ecosystem
    hyprland
    waybar
    fuzzel
    matugen
    
    # Terminal emulators
    foot
    kitty
    
    # Development tools
    git
    curl
    wget
    
    # System monitoring
    htop
    neofetch
    
    # Modern CLI utilities
    ripgrep      # rg - better grep
    fd           # better find
    fzf          # fuzzy finder
    bat          # better cat
    eza          # better ls
    tree         # directory tree
    
    # Wayland utilities
    wl-clipboard # Wayland clipboard
    grim         # Screenshots
    slurp        # Screen area selection
    
    # File management
    unzip
    zip
    
    # Text editors
    vim
    nano
    
    # Web browser
    firefox
  ];

  # Program configurations
  programs = {
    # Fish shell configuration
    fish = {
      enable = true;
      shellAliases = {
        # Modern replacements
        ll = "eza -l";
        la = "eza -la";
        ls = "eza";
        cat = "bat";
        grep = "rg";
        find = "fd";
        
        # System shortcuts
        rebuild = "sudo nixos-rebuild switch";
        hm-switch = "home-manager switch";
        
        # Useful shortcuts
        ".." = "cd ..";
        "..." = "cd ../..";
        tree = "eza --tree";
        
        # Git shortcuts
        gs = "git status";
        ga = "git add";
        gc = "git commit";
        gp = "git push";
        gl = "git log --oneline";
      };
      
      # Fish shell functions
      functions = {
        # Quick directory navigation
        mkcd = "mkdir -p $argv[1]; and cd $argv[1]";
        
        # Git clone and cd
        gclone = "git clone $argv[1]; and cd (basename $argv[1] .git)";
        
        # Quick screenshot
        screenshot = "grim -g \"(slurp)\" ~/Pictures/screenshot-(date +%Y%m%d_%H%M%S).png";
      };
    };
    
    # Git configuration
    git = {
      enable = true;
      userName = "Your Name";  # Change this
      userEmail = "your.email@example.com";  # Change this
      
      extraConfig = {
        init.defaultBranch = "main";
        pull.rebase = true;
        push.autoSetupRemote = true;
      };
    };
    
    # Fuzzel launcher configuration
    fuzzel = {
      enable = true;
      settings = {
        main = {
          terminal = "foot";
          layer = "overlay";
          font = "monospace:size=12";
        };
        colors = {
          background = "1e1e2edd";
          text = "cdd6f4ff";
          match = "f38ba8ff";
          selection = "585b70ff";
          selection-text = "cdd6f4ff";
          border = "b4befeff";
        };
      };
    };
    
    # Foot terminal configuration
    foot = {
      enable = true;
      settings = {
        main = {
          term = "xterm-256color";
          font = "monospace:size=12";
          dpi-aware = "yes";
        };
        
        mouse = {
          hide-when-typing = "yes";
        };
        
        colors = {
          background = "1e1e2e";
          foreground = "cdd6f4";
        };
      };
    };
    
    # Kitty terminal configuration
    kitty = {
      enable = true;
      font = {
        name = "monospace";
        size = 12;
      };
      
      settings = {
        background_opacity = "0.9";
        enable_audio_bell = false;
        confirm_os_window_close = 0;
      };
    };
    
    # Bat (better cat) configuration
    bat = {
      enable = true;
      config = {
        theme = "Catppuccin-mocha";
        style = "numbers,changes,header";
      };
    };
    
    # Home Manager self-management
    home-manager = {
      enable = true;
    };
  };

  # Custom files and configurations
  home.file = {
    # Example: Custom Hyprland configuration
    # ".config/hypr/hyprland.conf".source = ./dotfiles/hyprland/hyprland.conf;
    
    # Example: Custom Waybar configuration
    # ".config/waybar/config".source = ./dotfiles/waybar/config;
    # ".config/waybar/style.css".source = ./dotfiles/waybar/style.css;
  };

  # Session variables
  home.sessionVariables = {
    EDITOR = "nano";
    BROWSER = "firefox";
    TERMINAL = "foot";
    
    # Wayland specific
    MOZ_ENABLE_WAYLAND = "1";
    QT_QPA_PLATFORM = "wayland";
    SDL_VIDEODRIVER = "wayland";
    _JAVA_AWT_WM_NONREPARENTING = "1";
  };

  # XDG configuration
  xdg = {
    enable = true;
    
    # Default applications
    mimeApps = {
      enable = true;
      defaultApplications = {
        "text/html" = "firefox.desktop";
        "x-scheme-handler/http" = "firefox.desktop";
        "x-scheme-handler/https" = "firefox.desktop";
        "x-scheme-handler/about" = "firefox.desktop";
        "x-scheme-handler/unknown" = "firefox.desktop";
      };
    };
  };

  # Services
  services = {
    # Example: Enable GPG agent
    gpg-agent = {
      enable = true;
      defaultCacheTtl = 1800;
      enableSshSupport = true;
    };
  };
} 